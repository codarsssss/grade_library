# Django Library Project üìö

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

**Django Library Project** ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π.  
–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–æ–±–∞–≤–ª—è—Ç—å –∫–Ω–∏–≥–∏, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Ö, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∂–∞–Ω—Ä—É, –∞–≤—Ç–æ—Ä—É –∏ –¥–∞—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –ø–æ–∏—Å–∫.

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:

- **Django + Django REST Framework** ‚Äî –¥–ª—è API –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞  
- **PostgreSQL** ‚Äî –≤ –∫–∞—á–µ—Å—Ç–≤–µ –°–£–ë–î  
- **Docker + Docker Compose** ‚Äî –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏  
- **Makefile** ‚Äî –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º  
- **Silk** ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
- **Pillow** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π  
- **Celery + Redis** ‚Äî –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)  
- **sitemap.xml** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã —Å–∞–π—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º  
- **Black + isort + flake8** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–∞ –≤ –µ–¥–∏–Ω–æ–º —Å—Ç–∏–ª–µ  

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

‚úÖ CRUD –¥–ª—è –∫–Ω–∏–≥, –∞–≤—Ç–æ—Ä–æ–≤ –∏ –∂–∞–Ω—Ä–æ–≤  
‚úÖ REST API  
‚úÖ –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–Ω–∏–≥ –ø–æ –∞–≤—Ç–æ—Ä—É, –∂–∞–Ω—Ä—É –∏ –¥–∞—Ç–µ  
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ä–µ—Å–∞–π–∑ –æ–±–ª–æ–∂–µ–∫ –∫–Ω–∏–≥  
‚úÖ –ò–º–ø–æ—Ä—Ç –∫–Ω–∏–≥ –∏–∑ CSV –≤ –∞–¥–º–∏–Ω–∫–µ  
‚úÖ UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –∫–Ω–∏–≥  
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ—Ä–æ–≤ –∏ –∂–∞–Ω—Ä–æ–≤  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ AJAX –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏  
‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Silk  
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –¥–µ–π—Å—Ç–≤–∏–π  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏ (i18n)  
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–Ω–∏–≥–∞—Ö —á–µ—Ä–µ–∑ Celery  
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `sitemap.xml` –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone git@github.com:codarsssss/grade_library.git
cd grade_library
```

### 2Ô∏è‚É£ –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª

```bash
cp .env.example .env
```

–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:

```env
PROJECT_NAME=library
DEBUG=True
DB_HOST=db
DB_PORT=5432
POSTGRES_USER=myuser
POSTGRES_PASSWORD=mypassword
POSTGRES_DB=mydatabase
SECRET_KEY=your-secret-key
EXTERNAL_PORT=8000
EXTERNAL_DB_PORT=5432
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
make up
```

### 4Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
make migrate
make createsuperuser
```

### 5Ô∏è‚É£ –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```
http://localhost:8000/
```

---

## üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–º —á–µ—Ä–µ–∑ Makefile

| –ö–æ–º–∞–Ω–¥–∞               | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|-----------------------|----------------------------------------------|
| `make up`            | –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–≤ —Ñ–æ–Ω–µ)                   |
| `make up-logs`       | –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å –ª–æ–≥–∞–º–∏                   |
| `make down`          | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤                         |
| `make restart`       | –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫                                   |
| `make migrations`    | –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π                             |
| `make migrate`       | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π                           |
| `make createsuperuser` | –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                  |
| `make shell`         | Django shell                                 |
| `make container-shell` | –¢–µ—Ä–º–∏–Ω–∞–ª –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ                       |
| `make logs`          | –õ–æ–≥–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                           |
| `make collectstatic` | –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏                                |
| `make clean`         | –û—á–∏—Å—Ç–∫–∞ (volumes, images, orphans)            |
| `make style`         | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ª–∏–Ω—Ç–∏–Ω–≥                      |
| `make format`        | Black + isort                                 |
| `make lint`          | flake8                                        |
| `make makemessages`  | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å .po —Ñ–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤         |
| `make compilemessages` | –ö–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã                     |

---

## üõ° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- üìÇ **–ò–º–ø–æ—Ä—Ç CSV** ‚Äî –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Django Admin (`/admin/import_csv/`)
- üìä **Silk-–ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** ‚Äî –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `/silk/`
- üñº **–û–±–ª–æ–∂–∫–∏ –∫–Ω–∏–≥** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ—Å–∞–π–∑—è—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚öôÔ∏è –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏ –ø–æ–∫—Ä—ã—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## üåê –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (i18n)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî **—Ä—É—Å—Å–∫–∏–π** –∏ **–∞–Ω–≥–ª–∏–π—Å–∫–∏–π** —è–∑—ã–∫–∏.  
–í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —è–∑—ã–∫ –ø—Ä—è–º–æ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ (–≤ —à–∞–ø–∫–µ) ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å URL (`/ru/`, `/en/`).

### üî§ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

#### –°–æ–∑–¥–∞–Ω–∏–µ `.po` —Ñ–∞–π–ª–æ–≤ (–µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞):
```bash
make makemessages
```

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
–ü–µ—Ä–µ–≤–æ–¥—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
```
app/locale/{ru,en}/LC_MESSAGES/django.po
```

#### –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤:
```bash
make compilemessages
```

> –ü–µ—Ä–µ–≤–µ–¥–µ–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–±–ª–æ–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –∫–Ω–æ–ø–∫–∏, –ø–æ–¥–ø–∏—Å–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º.

---

### –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–º–µ–Ω–∏—Ç—å —è–∑—ã–∫, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É üá∑üá∫ RU –∏–ª–∏ üá¨üáß EN –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏. –Ø–∑—ã–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–µ—Å—Å–∏–∏ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º —à–∞–±–ª–æ–Ω–∞–º –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.

---

## üì® –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∫–Ω–∏–≥–∞—Ö (Celery)

- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–Ω–∏–≥–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**.
- –ó–∞–¥–∞—á–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **Celery + Redis**.
- –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ worker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (`docker compose logs -f worker`).

---

## üó∫ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è sitemap.xml

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è `sitemap.xml` —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏:

- `/book/<id>/` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞  
- `/author/<id>/` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∞  
- `/genre/<id>/` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∂–∞–Ω—Ä–∞

–î–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:8000/sitemap.xml
```
